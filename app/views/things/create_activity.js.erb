<% if @thing.errors.any? %>
  // Render new review form with errors
  $('#new_thing').html('<%= j render "cities/new_activity_form" %>')
<% else %>
  // Add it to the DOM, at the end of the existing reviews. It's still hidden.
  var new_card = $('<%= j render "shared/selection_card", thing: @thing %>').hide();
  if ($("#activity1>div").attr("class") == "empty_selection"){
    $('#activity1').html('');
    $('#activity1').append(new_card);
    new_card.fadeIn();
  } else if ($("#activity2>div").attr("class") == "empty_selection"){
    $('#activity2').html('');
    $('#activity2').append(new_card);
    new_card.fadeIn();
  } else if ($("#activity3>div").attr("class") == "empty_selection"){
    $('#activity3').html('');
    $('#activity3').append(new_card);
    new_card.fadeIn();
  } else {
    var new_card1 = $($('#activity2').html()).hide();
    var new_card2 = $($('#activity3').html()).hide();
    $('#activity1').html('');
    $('#activity1').append(new_card1);
    $('#activity2').html('');
    $('#activity2').append(new_card2);
    $('#activity3').html('');
    $('#activity3').append(new_card);
    new_card1.fadeIn();
    new_card2.fadeIn();
    new_card.fadeIn();
    $('#new_thing_modal').modal("hide");
  }
<% end %>
