<% if @thing.errors.any? %>
  // Render new review form with errors
  $('#new_thing').html('<%= j render "cities/new_restaurant_form" %>')
<% else %>
  // Add it to the DOM, at the end of the existing reviews. It's still hidden.
  var new_card = $('<%= j render "shared/selection_card", thing: @thing %>').hide();
  if ($("#restaurant1>div").attr("class") == "empty_selection"){
    $('#restaurant1').html('');
    $('#restaurant1').append(new_card);
    new_card.fadeIn();
  } else if ($("#restaurant2>div").attr("class") == "empty_selection"){
    $('#restaurant2').html('');
    $('#restaurant2').append(new_card);
    new_card.fadeIn();
  } else if ($("#restaurant3>div").attr("class") == "empty_selection"){
    $('#restaurant3').html('');
    $('#restaurant3').append(new_card);
    new_card.fadeIn();
  } else {
    var new_card1 = $($('#restaurant2').html()).hide();
    var new_card2 = $($('#restaurant3').html()).hide();
    $('#restaurant1').html('');
    $('#restaurant1').append(new_card1);
    $('#restaurant2').html('');
    $('#restaurant2').append(new_card2);
    $('#restaurant3').html('');
    $('#restaurant3').append(new_card);
    new_card1.fadeIn();
    new_card2.fadeIn();
    new_card.fadeIn();
    $('#new_thing_modal').modal("hide");
  }
<% end %>
